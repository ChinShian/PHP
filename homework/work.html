<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <div class="d-flex" id="fruit">
            <!--  <div class="card  mt-2 ml-3" style="width: 18rem;">
                <img src="./ima/images/item-apple.jpg" class="card-img-top" alt="...">
                <div class="card-body py-0">
                    <h5 class="card-title" data-name="蘋果">蘋果</h5>
                    <div class="d-flex justify-content-between">
                        <p class="card-text text-danger" data-page="30">$30</p>
                        <a href="#" class="btn btn-primary mb-3" id="shopping-cart"><i
                                class="fas fa-shopping-cart"></i></a>
                    </div>
                </div>
            </div>
          <div class="card  mt-2 ml-3" style="width: 18rem;">
                <img src="./ima/images/item-banana.jpg" class="card-img-top" alt="...">
                <div class="card-body py-0">
                    <h5 class="card-title" data-name="香蕉">香蕉</h5>
                    <div class="d-flex justify-content-between">
                        <p class="card-text text-danger" data-page="30">$30</p>
                        <a href="#" class="btn btn-primary mb-3" id="shopping-cart"><i
                                class="fas fa-shopping-cart"></i></a>
                    </div>
                </div>
            </div>
            <div class="card  mt-2 ml-3" style="width: 18rem;">
                <img src="./ima/images/item-orange.jpg" class="card-img-top" alt="...">
                <div class="card-body py-0">
                    <h5 class="card-title" data-name="柳丁">柳丁</h5>
                    <div class="d-flex justify-content-between">
                        <p class="card-text text-danger" data-page="24">$24</p>
                        <a href="#" class="btn btn-primary mb-3" id="shopping-cart"><i
                                class="fas fa-shopping-cart"></i></a>
                    </div>
                </div>
            </div>
            <div class="card mt-2 ml-3" style="width: 18rem;">
                <img src="./ima/images/item-grape.jpg" class="card-img-top" alt="...">
                <div class="card-body py-0">
                    <h5 class="card-title" data-name="葡萄">葡萄</h5>
                    <div class="d-flex justify-content-between">
                        <p class="card-text text-danger" data-page="40">$40</p>
                        <a href="#" class="btn btn-primary mb-3" id="shopping-cart"><i
                                class="fas fa-shopping-cart"></i></a>
                    </div>
                </div>
            </div> -->
        </div>
        <div class="row justify-content-center mt-3">
            <div class="col-4">
                <div id="cart" class="cart card">
                    <div class="card-body">
                        <h3 class="card-title h5">購物車</h3>
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th class="text-nowrap">品名</th>
                                    <th class="text-nowrap">單價</th>
                                    <th style="width:100px;">數量</th>
                                </tr>
                            </thead>
                            <tbody id="cart-list">

                            </tbody>
                        </table>
                        <button class="btn btn-info btn-block">結帳</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script>
        $.ajax({
            method: "GET",
            url: "food.json",
            dataType: "json"
        })
            .done(function (fruit) {
                console.log(fruit)
                fruit.forEach(function (item) {
                    $("#fruit").append(`
                    <div class="card  mt-2" style="width: 18rem;">
                        <img src="./ima/images/${item.image}" class="card-img-top" alt="...">
                            <div class="card-body py-0">
                                <h5 class="card-title" id="name" data-name="${item.name}">${item.name}</h5>
                                <div class="d-flex justify-content-between">
                                    <p class="card-text text-danger" data-price="${item.price}">$${item.price}</p>
                                    <button type="button" class="btn btn-primary mb-3" id="shopping-cart"><i
                                        class="fas fa-shopping-cart"></i></button>
                                </div>
                            </div>
                    </div>
                `)
                });
            })
            .fail(function () {
            })
            .always(function () {
            });

        $(document).on("click", "#shopping-cart", function () {
            let name = $(this).parent().parent().children().data("name")
            let price = $(this).parent().children().eq(0).data("price")
            let cart = $(this).closest(".container").find("#cart-list")
            // console.log(cart)
            $("#cart-list").append(`
                            <tr class="tr">
                                 <th class="text-nowrap" data-name="${name}">${name}</th>
                                 <th class="text-nowrap" >${price}</th>
                                 <th style="width:100px;"><input type="number" class="form-control number text-right math" min="0" value="1"></th>
                            </tr>
                `)
            $("#cart-list").each(function () {
                // let lo = $(this).children().children().eq(0).text()
                // let namepage = $("#cart-list").text()
                // let shopping = $(this).closest(".container").find("#shopping-cart")
                console.log($(this).find(".tr").children().eq(0))
                // if (namepage == namepage) {
                // shopping.attr("disabled", "disabled")
                // }
            });
        })

        // $(document).on("click", "#shopping-cart", function () {
        //     let name = $(this).parent().parent().children().data("name")
        //     let page = $(this).parent().children().eq(0).data("page")
        //     // console.log(page)
        //     $("#cart-list").append(`
        //                 <tr>
        //                      <th class="text-nowrap" data-name="${name}">${name}</th>
        //                      <th class="text-nowrap">${page}</th>
        //                      <th style="width:100px;"><input type="number" class="form-control number text-right math" min="0" value="1"></th>
        //                 </tr>
        //     `)
        //     $("#cart-list").each(function () {
        //         let namepage = $(this).children().find("th").text()
        //         console.log(namepage)
        //         if (namepage == namepage) {
        //             $("#shopping-cart").attr("disabled", "disabled")

        //         }
        //     });

        // });

    </script>
</body>

</html>